#!/bin/bash

# Arguments:
# $1 schema path from project root

SCHEMA=$1

DATABASE_NAME_TEST="mpclib-database-test"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE DATABASE IF NOT EXISTS  \`$DATABASE_NAME_TEST\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_TEST < "$SCHEMA"
DATABASE_NAME_0="mpclib-database-0"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE SCHEMA IF NOT EXISTS \`$DATABASE_NAME_0\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_0 < "$SCHEMA"
DATABASE_NAME_1="mpclib-database-1"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE SCHEMA IF NOT EXISTS \`$DATABASE_NAME_1\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_1 < "$SCHEMA"
DATABASE_NAME_2="mpclib-database-2"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE SCHEMA IF NOT EXISTS \`$DATABASE_NAME_2\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_2 < "$SCHEMA"
DATABASE_NAME_3="mpclib-database-3"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE SCHEMA IF NOT EXISTS \`$DATABASE_NAME_3\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_3 < "$SCHEMA"
DATABASE_NAME_4="mpclib-database-4"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE SCHEMA IF NOT EXISTS \`$DATABASE_NAME_4\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_4 < "$SCHEMA"
DATABASE_NAME_DEV_0="mpclib-database-dev-0"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE SCHEMA IF NOT EXISTS \`$DATABASE_NAME_DEV_0\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_DEV_0 < "$SCHEMA"
DATABASE_NAME_DEV_1="mpclib-database-dev-1"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE SCHEMA IF NOT EXISTS \`$DATABASE_NAME_DEV_1\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_DEV_1 < "$SCHEMA"
DATABASE_NAME_DEV_2="mpclib-database-dev-2"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE SCHEMA IF NOT EXISTS \`$DATABASE_NAME_DEV_2\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_DEV_2 < "$SCHEMA"
DATABASE_NAME_DEV_3="mpclib-database-dev-3"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE SCHEMA IF NOT EXISTS \`$DATABASE_NAME_DEV_3\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_DEV_3 < "$SCHEMA"
DATABASE_NAME_DEV_4="mpclib-database-dev-4"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" -e "CREATE SCHEMA IF NOT EXISTS \`$DATABASE_NAME_DEV_4\`;"
mysql -h "$MYSQL_HOST_URL" -P "$MYSQL_PORT" --user="$MYSQL_ROOT_USER" --password="$MYSQL_ROOT_PASSWORD" $DATABASE_NAME_DEV_4 < "$SCHEMA"
