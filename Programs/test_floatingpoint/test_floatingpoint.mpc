test(AdvInteger.Inv(sint(2)) * 2, 1)

test(cint(AdvInteger.two_power(1)))
test(cint(AdvInteger.two_power(30)))

b = AdvInteger.bits(cint(23), 5)
test(b[0], 1)
test(b[1], 1)
test(b[2], 1)
test(b[3], 0)
test(b[4], 1)

b = AdvInteger.PreOR([sint(i) for i in [0,1,0,1,0]])
test(b[0], 0)
test(b[1], 1)
test(b[2], 1)
test(b[3], 1)
test(b[4], 1)

x = AdvInteger.PreOR([sint(1)] + [sint(0)] * 1000)
test(x[0], 1)
test(x[1000], 1)

x = AdvInteger.PreOR([sint(0)] * 1000 + [sint(1)])
test(x[999], 0)
test(x[1000], 1)

b = AdvInteger.PreOpL(AdvInteger.carry, \
  [(sint(a),sint(b)) for a,b in [(0,1),(1,0),(0,1)]])
test(b[0][0], 0)
test(b[0][1], 1)
test(b[1][1], 1)
test(b[2][1], 1)

b = AdvInteger.KOR([sint(i) for i in [0,1,0]])
test(b, 1)

b = AdvInteger.KOR([sint(i) for i in [0,0,0]])
test(b, 0)

b = AdvInteger.KOpL(AdvInteger.carry, \
  [(sint(a),sint(b)) for a,b in [(0,1),(1,0),(0,1)]])
test(b[0], 0)
test(b[1], 1)

b = AdvInteger.BitAdd([sint(i) for i in [0,1,0,1,1]], [sint(i) for i in [0,1,1,1,0]])
test(b[0], 0)
test(b[1], 0)
test(b[2], 0)
test(b[3], 1)
test(b[4], 0)
test(b[5], 1)

b = AdvInteger.BitDec(sint(23), 5, 5, 20)
test(b[0], 1)
test(b[1], 1)
test(b[2], 1)
test(b[3], 0)
test(b[4], 1)

test(AdvInteger.Pow2(sint(23), 32, 20), 2**23)

b,c = AdvInteger.B2U(sint(3), 5, 20)
test(b[0], 1)
test(b[1], 1)
test(b[2], 1)
test(b[3], 0)
test(b[4], 0)
test(c, 8)

test(AdvInteger.Oblivious_Trunc(sint(23), 5, sint(3), 20), 2)

x,y = AdvInteger.Oblivious_Trunc(sint(1), 1, sint(1), 20, True)
test(x, 1)
test(y, 2)

s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(7), 3, 2, 8)
test(s, 2)
test(o, 1)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(4), 3, 2, 8)
test(s, 2)
test(o, 0)

s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(0), 4, 2, 8)
test(s, 0)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(1), 4, 2, 8)
test(s, 0)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(2), 4, 2, 8)
test(s, 1)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(3), 4, 2, 8)
test(s, 1)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(4), 4, 2, 8)
test(s, 1)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(5), 4, 2, 8)
test(s, 1)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(6), 4, 2, 8)
test(s, 2)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(7), 4, 2, 8)
test(s, 2)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(8), 4, 2, 8)
test(s, 2)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(9), 4, 2, 8)
test(s, 2)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(10), 4, 2, 8)
test(s, 3)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(11), 4, 2, 8)
test(s, 3)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(12), 4, 2, 8)
test(s, 3)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(13), 4, 2, 8)
test(s, 3)
test(o, 0)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(14), 4, 2, 8)
test(s, 2)
test(o, 1)
s,o = floatingpoint.TruncRoundNearestAdjustOverflow(sint(15), 4, 2, 8)
test(s, 2)
test(o, 1)

test(AdvInteger.TruncPr(sint(23), 5, 3, 20), 2, 4)
test(AdvInteger.TruncPr(sint(23), 5, 3, 20), 2, 4)
test(AdvInteger.TruncPr(sint(23), 5, 3, 20), 2, 4)
